# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: cicd.innkeeper.run/v1
kind: Guest
metadata:
  name: innkeeper
  namespace: innkeeper
spec:
  builds:
    - name: backend
      namespace: git-builder
      git:
        uri: git@github.com:InnKeeperDevOps/InnKeeperSite.git
        secret: github-ssh
      publish:
        secret: git-repo
        registry: ghcr.io
        tag: innkeeperdevops/innkeeper-site
    - name: example
      namespace: git-builder
      git:
        uri: git@github.com:InnKeeperDevOps/example-nginx.git
        secret: github-ssh
      publish:
        secret: git-repo
        registry: ghcr.io
        tag: innkeeperdevops/example-nginx
  deployments:
    - name: innkeeper-site
      namespace: innkeeper
      replicas: 1
      containers:
        - buildName: backend
          name: backend
    - name: example-site
      namespace: innkeeper
      replicas: 1
      containers:
        - buildName: example
          name: example
  services:
    - name: innkeeper-www
      deployment: innkeeper-site
      port: 9023
    - name: example-site
      deployment: example-site
      port: 80
  ingress:
    - name: innkeeper-www
      type: HTTP
      services:
        - innkeeper-www
      domain: innkeeper.run
      path: /
      port: 9023
      gateways:
        - internet
    - name: innkeeper-example
      type: HTTP
      services:
        - example-site
      domain: www.innkeeper.run
      path: /
      port: 80
      gateways:
        - internet